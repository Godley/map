language: node_js
node_js:
- node
cache: npm
branches:
  only:
  - master
env:
  global:
  - secure: jFIIijKKZahsaeAHZsvp0JDNqDpkl4Q4MsoFc3Z3wBrrno5x+kts1Sa8F+m1pSXXfb2HL5QUgAZeEG2xe1/PJV5FxhusXvZz7Rqwjd+3YUmowsk2rSWO2yBbyPx4+vpy+hk/IgzwQ30COZaBnQxPbcC4a7yS4+c7rYXFydk2NfvgwQJycV4xa7AdkghsU4Uan263Yju63RbIOKoXIHZgvtPQAObnQ8YWGtsfte8OZ01NlgsdQci/F2tFFS0euBdVG5z0isrp2CP33REv0eWo/hNEQJy4/VonhwBM21BRPHoqFQfjtNjApYvJ684vot74DcFNDDBGyZ8OcIcO5dPua34UmTb7E/Y3B04+m/UTMJEXmdx78etbXmqq5q285h8wxwqvRGsvKIR7zI/8SrNw6cdrKVJso9w4l1lNtClAqQfdX0gCS/ur9+cfYq5OHXNzAfEZ+FcWCCJdjGvwM9dt907X3VU+3TmuyQ0ZFOmZd83H8dMjQUDJuFP8pChX4EUrPS/IbCz7V0Bl7Kxh15gKpgVdWIKRs15NqYfBg6lMxrV95bMamSUVT7O4pBsy4o/ZRGmxCKSvYwRSyth4Sunu7+tTzMt6vmOWkHY0eVq3xvOuHi6IlYYLK8afYcczgryWnM7FojTrf+FD1ZRxpbao8OCDg+slaUDADFIgCzN1Ouc=
  - secure: QYQyEfB4NTo8e5hu60NrdiRqpq6wieiygM23CggBp+49frpqjznpD+oe1bWqry3g5pr/a6eS/XRTfuQF/RkECNHr5CpeakELGs1nelgSq63NnH7BqLOmIfP/p56wT9Cry8Y3qpi+N3Ekv1gpIwZK+W3wIRls9T+PPwuytpDKOZ/6X+bcBrosxfocqSuHXzREPY+B8RwBKx3EukYYVvyivOj/WKplGFuozvPTpwQ0/8/WpVSvpZ5IMtNx7dACyyPPHZBM0xzbjX5m7SSCvyHm1BwLOFaHGLxEwrYVEds0bB2G8c65OCnL0u+HXg9pLbp8CX9rqOKC4oj/pppa/srfdaOtu6DiykU4yIPRUGyc9QTmg0w4Ma8lFI4P+IuG/yPZ3h04ApNOmz0uy+D3bOOX3PbWxoo9AQf7riWAqo0JppNYDKrc0b7TQzqFgHG82F53sG0ukbDi/5DunhfF0bsZY7jzlPBowpnrvX6+nyn06rjeKwKud4n5DcZDf0McmEsQzSyaPk6knwKGVdIAK74OTpKoH3lmVUIg/XErQWUgxWvWyxl1kqCIYsOTnWuY+hD7Od991x/0K2if1QrF08AtEkK6685+QGDmOTF9eXsuFpAf2Jhgv9s1x78atG1FIx8m9WoqgrBImMkWTxbB8whBF/2EyRkYjivQdY3g7ICGbp0=
  - secure: nwUDcQxLI2BlOZZwOXaOzTSYXNSn0kQxL2nD3Njc9IKOUFojOzx8xI7CjBFrZPfvwEMu73XGDNxyvWb0PIl3bAsB96KWxVFX7CQuM/bFsO/K982R22qpOoHqUMNS5m1ue/d1MTK4Qrnm/WpDFhvFNp0kI/4PMZbM3FSl52XCImLfB8SthlSeOZTyYWsHNusuhKj7ecMe+zmN2cxqn91gL3u+LiMD+6EVJQ4OzemC4dqOKdkAawCTmhLoWav97XGj1vEyHmmnFURIql/6TU8m09wW5rgR528UlDTJC9glh3DjmnB6mUG+voBn+N4DFM3BWsY+FfLylFK0xYrKSdFQFyu9w05WZAzDtN3S2JaFIA391fCO6xye6SAyU6p5uYbeTj2WKyrUPuM8xQ8hDAGYBfcZPRDBzFTr8bWcuYcXvbbffRl6ohxV7bBvy0DzYR4d1qUDKdat2KWArVRFDFiGynXTwCFXzqMx84fLR6JW4EUH7BGUA9WADKW8Qe7PzE4CTkz6hjd+VM0KzPVTb4VZFW8AfK17tE7SoSzvfYFMAzy5rqeIdkg3rS/JClmlNQCStOpWS8VhR6zBcDhEh5luG4PTyCl1qY1AhA/jD1UzFH8oeRcZV7ex3eJbcN73lhoJ8epQNgEZfY7IGop/gQ/72u1i+MiOLIQrnXPmJBol+Hk=
  - NOW="now --token ${NOW_TOKEN}"
  - secure: cvHO/75H5x0vUFjYHGfh6L3nnY6X5yZDmx/biuKRc/k8v8bYrqAUR6aB7EwQY1cgbjJNmy8P9TogJYvfr2VUpTs/nytDQ4MRkOhwdf/BHI/3UV4lXmufUHWTfmSmo9lBFN0J6KHUfqS1Ykcp4WbkDhFBDyto/OY7bhC/z8carItj6NZ4Au+5RcgFSadJE3QPOxT7U9CsnMXZ7Ixo//LmELhid165TtdpDaQlazLiVI2rngAd8W4GuQ9dsrapaxltyVIte+FqPwBkdOveHCTbTS3gPiBq73+wpOjyM9fHu6RQebabUUt5509kMR30RlFF3jOpEu18KhPh/wyaoxdDXOjX+h2fheszECbcSAHnHPz8aHhObMS7P/ucUhJWxmDgzbkvNTozcdnjyYWxPwCZDr9SEeAdQnBhkNPtrQkvjQ7UdGqPrHWJQNXtSi8T3SoNarq5EQSFDJAWB019ZEU3rZiuJA1+Sb5jnsCWIR5sH+gEF9AH2Xqo0ObnHhwinl/vwdI1wDXTWC987x6rLK/tXFCYEz4aghjrcQIZLoFoY1LjZkde3xUzyOKD3WYOlBRwQpTNmX7Q7enoEbD0s+0EsJK5pnJiS7IdNOI7G0MZrVmqxPR3mK+NEma8eVl66Ft3l9hRg9K6TZXhAXXVqIzQfbXrNCMBNTl3IQd/BMzsqDk=
  - secure: qsN0FwePkslYLIEucoJiN5dOjuJLO1STUL9EEQCYcJDwmNf1lEl9yRf1/J8+JCVxH7xW4lFcZEvo69mg06aYxL5isVOSJiSgbMaBLh8FHwbkst1Bx3q0ZOiEcjXaWqCUmxMSNRZq+Nl/mOxRXoIQG4GDfJgYpqlRdTEkV6K9cXTW0AmTq5CvJxlh/aeHAsVDeoDrzDDA4NlpjC4H5fpGdbuceWMG5wzd+Z+T3Gef+T9JEfukzvg++L9hUwaITYWak72fLpq89wRcn8cL9u/WSVvuvPVHclXatgbTGMkr/ymEW0ErJpNPRHxBWJrkpEMVBUwSLCZ3k6Ngs+6AOgvgmSQ7+9kTdaG31UQjAHvRn1y2yve++qhrnUDUfEHryvnPnPcKF9aDWHOZrGVrxc4OGpTu9gFe4L/zE53n8bg8xvF7Hum9FImPwU01ihLRAv7ENUY4SpZJSGg3gReGUf5EFZO3kBxTCoMxIgL0NBqz31HGU3b1xMSV0JQFUfpIueGsZ3qxNnHK6jkQjVeVqIXpp4T9qjvfUmWH+4oAvxpGolYHTB/Y8TfsMZ2j6hY98DBsaKSQ9B1tGVX3EXjS0CHcq2AP+FYZm6RPlKMUCDrNHRfY08B6aKdgVVMkAy9sKJbP3DPSsT6TRZ+mn8weRYe14yDxmFEBWia1S5ZgZ9rgNB0=
  - secure: PO+TUUiuVkksGhEkYCfTAmap4ZgtBcZUZZ3X7AVWL9j/8RHNMpXHzYGdrMqzhNcKCr6VCUwqlkTb47z6zL5g4JH9GTtVuMvhgLztFpFOKOq6EBOUbs1/5puGe9INgEwEGDYl+feh+XSmK1Kyd2JRmIgopi4XqNYeuVxPJ22man8BX9qj46FfOMhQl2orwAincWWjWoVYCFjLHgaRPYHAiJ1ursRGyNQmpK+xV7qrh/p4m48MRYzHgduaOvipgmB9wCdD1JibuEdAifnEz8MQZmlXLdSQ9TA004N9TbEx0R9uU4Jesv671tTDLmgdrpLv4ltKWiiGwfWsRuf9F6XO917LlM+2xOcK/na4YI4DK+hjfMukk2iKm5QWull9CZ27ryVAcL3ijjFfYRvqAODTW5Hw4F8lx7Jf2hCDmFlnjuZPF5N1wZ+Ms1cEwKxbGli2ScS4DfrfREhs460pZESyHoqF5XHg/Jj8K1TyrOx0MNi3SCjzuzJVSDImk7SRmjlqLC3w2/4zVtFhiQ+9A7gBy9+Pcuz4Bmia00M36PVNXPKcn2yDnA7fFX2+MKbmL2VFqKcKRy9ZT0Bnhjtnd5Dx0aXdfSPW+ZfLeSWyQ01tTP4qdjaKMCyHsWgXrrmr/O9UejYhlzmnJU4M2MGp4OggDfmZ2Id5+xHjZlj+AtIYzjg=
  - secure: adE1qQOjwbKrkPAYsloRrNuDOM/xYYd/5e7/T35UQFy5gnGEJt+QbklY7tMnP9TXCAHjKoNxmVojWW8g94I0Zoff5dftQD7uAGLX9692VDaNRAbDj1T/P00Cz/7DlTPRUW7k0z3CZYJSI8nPdA/23xI9kX0xl/r1HQ8OQwkFcZIWPuTzsECio8dU8RrJF9e4bc5KTUOZO5YxqkgzyhwszWMfsmJVS7g8OLxtt3YPQvrpn0clKcib8FAAB9P2mNyUfpjrHyBurfaep09N/KGXv0G3OLdSgdSRmI78JCHkJprgQ3Oah7m/Bz1X1MZdNSTqPn8ZjZ29U310alxkTQS7Kz/M1Je5XWq++3KCQNQZj0S5mSy6zVv5VDsHFt5068peBDgJeZqVK95CrzqxtK998IPv2cAxw2Vlo4fTPePk000DBNNvgnT6wt8XSnIAnT58GJFS8mo29wwL2V6mgELsN0uOeAGXRZJ+a4De4Ct+WZJrGEbym8pA6qcMP37Z5/vbgiF7UimQhzVo2yEFx7gfrMW824l3XbxJr64TFvw0yPkBrdB1OJeqRdMLKvGY6dfjNM0ya/+2BDGK8aqVpMhGf42jxS4nQixpNZyDsqucEay6PPl6E8NKdK0Qc3jUnqSWUODBFqw7MBx5PQ5ZE05KDqBiX7H1BjrgB4La15c/3Hg=
before_script:
- npm install now
- "$NOW rm map -y"
- "$NOW secrets add django_secret ${DJANGO_KEY}"
- "$NOW secrets add db_url ${DB_URL}"
- "$NOW secrets add gmaps_key $GMAPS_KEY"
script:
- "$NOW -e DJANGO_SECRET_KEY=@django_secret -e GMAPS_KEY=@gmaps_key -e DATABASE_URL=@db_url --dockerfile --public"
after_script: "$NOW alias"
