language: node_js
node_js:
- node
cache: npm
branches:
  only:
  - master
env:
  global:
  - secure: jFIIijKKZahsaeAHZsvp0JDNqDpkl4Q4MsoFc3Z3wBrrno5x+kts1Sa8F+m1pSXXfb2HL5QUgAZeEG2xe1/PJV5FxhusXvZz7Rqwjd+3YUmowsk2rSWO2yBbyPx4+vpy+hk/IgzwQ30COZaBnQxPbcC4a7yS4+c7rYXFydk2NfvgwQJycV4xa7AdkghsU4Uan263Yju63RbIOKoXIHZgvtPQAObnQ8YWGtsfte8OZ01NlgsdQci/F2tFFS0euBdVG5z0isrp2CP33REv0eWo/hNEQJy4/VonhwBM21BRPHoqFQfjtNjApYvJ684vot74DcFNDDBGyZ8OcIcO5dPua34UmTb7E/Y3B04+m/UTMJEXmdx78etbXmqq5q285h8wxwqvRGsvKIR7zI/8SrNw6cdrKVJso9w4l1lNtClAqQfdX0gCS/ur9+cfYq5OHXNzAfEZ+FcWCCJdjGvwM9dt907X3VU+3TmuyQ0ZFOmZd83H8dMjQUDJuFP8pChX4EUrPS/IbCz7V0Bl7Kxh15gKpgVdWIKRs15NqYfBg6lMxrV95bMamSUVT7O4pBsy4o/ZRGmxCKSvYwRSyth4Sunu7+tTzMt6vmOWkHY0eVq3xvOuHi6IlYYLK8afYcczgryWnM7FojTrf+FD1ZRxpbao8OCDg+slaUDADFIgCzN1Ouc=
  - secure: QYQyEfB4NTo8e5hu60NrdiRqpq6wieiygM23CggBp+49frpqjznpD+oe1bWqry3g5pr/a6eS/XRTfuQF/RkECNHr5CpeakELGs1nelgSq63NnH7BqLOmIfP/p56wT9Cry8Y3qpi+N3Ekv1gpIwZK+W3wIRls9T+PPwuytpDKOZ/6X+bcBrosxfocqSuHXzREPY+B8RwBKx3EukYYVvyivOj/WKplGFuozvPTpwQ0/8/WpVSvpZ5IMtNx7dACyyPPHZBM0xzbjX5m7SSCvyHm1BwLOFaHGLxEwrYVEds0bB2G8c65OCnL0u+HXg9pLbp8CX9rqOKC4oj/pppa/srfdaOtu6DiykU4yIPRUGyc9QTmg0w4Ma8lFI4P+IuG/yPZ3h04ApNOmz0uy+D3bOOX3PbWxoo9AQf7riWAqo0JppNYDKrc0b7TQzqFgHG82F53sG0ukbDi/5DunhfF0bsZY7jzlPBowpnrvX6+nyn06rjeKwKud4n5DcZDf0McmEsQzSyaPk6knwKGVdIAK74OTpKoH3lmVUIg/XErQWUgxWvWyxl1kqCIYsOTnWuY+hD7Od991x/0K2if1QrF08AtEkK6685+QGDmOTF9eXsuFpAf2Jhgv9s1x78atG1FIx8m9WoqgrBImMkWTxbB8whBF/2EyRkYjivQdY3g7ICGbp0=
  - secure: nwUDcQxLI2BlOZZwOXaOzTSYXNSn0kQxL2nD3Njc9IKOUFojOzx8xI7CjBFrZPfvwEMu73XGDNxyvWb0PIl3bAsB96KWxVFX7CQuM/bFsO/K982R22qpOoHqUMNS5m1ue/d1MTK4Qrnm/WpDFhvFNp0kI/4PMZbM3FSl52XCImLfB8SthlSeOZTyYWsHNusuhKj7ecMe+zmN2cxqn91gL3u+LiMD+6EVJQ4OzemC4dqOKdkAawCTmhLoWav97XGj1vEyHmmnFURIql/6TU8m09wW5rgR528UlDTJC9glh3DjmnB6mUG+voBn+N4DFM3BWsY+FfLylFK0xYrKSdFQFyu9w05WZAzDtN3S2JaFIA391fCO6xye6SAyU6p5uYbeTj2WKyrUPuM8xQ8hDAGYBfcZPRDBzFTr8bWcuYcXvbbffRl6ohxV7bBvy0DzYR4d1qUDKdat2KWArVRFDFiGynXTwCFXzqMx84fLR6JW4EUH7BGUA9WADKW8Qe7PzE4CTkz6hjd+VM0KzPVTb4VZFW8AfK17tE7SoSzvfYFMAzy5rqeIdkg3rS/JClmlNQCStOpWS8VhR6zBcDhEh5luG4PTyCl1qY1AhA/jD1UzFH8oeRcZV7ex3eJbcN73lhoJ8epQNgEZfY7IGop/gQ/72u1i+MiOLIQrnXPmJBol+Hk=
  - NOW="now --token ${NOW_TOKEN}"
  - secure: adE1qQOjwbKrkPAYsloRrNuDOM/xYYd/5e7/T35UQFy5gnGEJt+QbklY7tMnP9TXCAHjKoNxmVojWW8g94I0Zoff5dftQD7uAGLX9692VDaNRAbDj1T/P00Cz/7DlTPRUW7k0z3CZYJSI8nPdA/23xI9kX0xl/r1HQ8OQwkFcZIWPuTzsECio8dU8RrJF9e4bc5KTUOZO5YxqkgzyhwszWMfsmJVS7g8OLxtt3YPQvrpn0clKcib8FAAB9P2mNyUfpjrHyBurfaep09N/KGXv0G3OLdSgdSRmI78JCHkJprgQ3Oah7m/Bz1X1MZdNSTqPn8ZjZ29U310alxkTQS7Kz/M1Je5XWq++3KCQNQZj0S5mSy6zVv5VDsHFt5068peBDgJeZqVK95CrzqxtK998IPv2cAxw2Vlo4fTPePk000DBNNvgnT6wt8XSnIAnT58GJFS8mo29wwL2V6mgELsN0uOeAGXRZJ+a4De4Ct+WZJrGEbym8pA6qcMP37Z5/vbgiF7UimQhzVo2yEFx7gfrMW824l3XbxJr64TFvw0yPkBrdB1OJeqRdMLKvGY6dfjNM0ya/+2BDGK8aqVpMhGf42jxS4nQixpNZyDsqucEay6PPl6E8NKdK0Qc3jUnqSWUODBFqw7MBx5PQ5ZE05KDqBiX7H1BjrgB4La15c/3Hg=
before_script:
- npm install now
- "$NOW rm map -y"
- "$NOW secrets add django_secret ${DJANGO_KEY}"
- "$NOW secrets add db_url ${DATABASE_URL}"
- "$NOW secrets add gmaps_key $GMAPS_KEY"
script:
- "$NOW -e DJANGO_SECRET_KEY=@django_secret -e GMAPS_KEY=@gmaps_key -e DATABASE_URL=@db_url --dockerfile --public"
after_script: "$NOW alias"
